(this["webpackJsonppetful-client"]=this["webpackJsonppetful-client"]||[]).push([[0],{21:function(e,t,n){e.exports=n(38)},26:function(e,t,n){},27:function(e,t,n){e.exports=n.p+"static/media/adoptDog.75e3a121.png"},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){e.exports=n.p+"static/media/congrats.11133177.png"},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(18),u=n.n(o),c=n(11),s=n(20),i=n(3),l=n(4),h=n(6),m=n(5),d=a.a.createContext({users:[],queue:{first:{}},userName:"",currentCat:{},currentDog:{},adopted:[],error:null,setUsers:function(){},clearUsers:function(){},setQueue:function(){},clearQueue:function(){},setUserName:function(){},clearUserName:function(){},setCurrentCat:function(){},clearCurrentCat:function(){},setCurrentDog:function(){},clearCurrentDog:function(){},setAdopted:function(){},clearAdopted:function(){},setError:function(){},clearError:function(){},randomCatDog:function(){},cycleList:function(){}}),f=d,p=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={users:[],queue:{first:{},requeue:function(){}},userName:"",currentCat:{},currentDog:{},adopted:[],error:null},e.setUsers=function(t){e.setState({users:t})},e.clearUsers=function(){e.setState({users:[]})},e.setQueue=function(t){e.setState({queue:t})},e.clearQueue=function(){e.setState({first:{},requeue:function(){}})},e.setUserName=function(t){e.setState({userName:t})},e.clearUserName=function(){e.setState({userName:""})},e.setCurrentCat=function(t){e.setState({currentCat:t})},e.clearCurrentCat=function(){e.setState({currentCat:{}})},e.setCurrentDog=function(t){e.setState({currentDog:t})},e.clearCurrentDog=function(){e.setState({currentDog:{}})},e.setError=function(t){console.log(t),e.setState({error:t})},e.clearError=function(){e.setState({error:null})},e.setAdopted=function(t){e.setState({adopted:[].concat(Object(s.a)(e.state.adopted),[t])})},e.clearAdopted=function(){e.setState({adopted:[]})},e.randomCatDog=function(){Math.floor(100*Math.random())<50?e.handleAdoptCat():e.handleAdoptDog()},e.cycleList=function(){e.context.userName!==e.context.queue.first.value&&setTimeout((function(){this.randomCatDog()}),5e3)},e}return Object(l.a)(n,[{key:"render",value:function(){var e={users:this.state.users,queue:this.state.queue,userName:this.state.userName,currentCat:this.state.currentCat,currentDog:this.state.currentDog,adopted:this.state.adopted,error:this.state.error,setUsers:this.setUsers,clearUsers:this.clearUsers,setQueue:this.setQueue,clearQueue:this.clearQueue,setUserName:this.setUserName,clearUserName:this.clearUserName,setCurrentCat:this.setCurrentCat,clearCurrentCat:this.clearCurrentCat,setCurrentDog:this.setCurrentDog,clearCurrentDog:this.clearCurrentDog,setAdopted:this.setAdopted,clearAdopted:this.clearAdopted,setError:this.setError,clearError:this.clearError,randomCatDog:this.randomCatDog,cycleList:this.cycleList};return a.a.createElement(d.Provider,{value:e},this.props.children)}}]),n}(r.Component),E=n(1),g={REACT_APP_API_BASE:"https://fuentes-petful.herokuapp.com"},v={postUser:function(e){return fetch("".concat(g.REACT_APP_API_BASE,"/users"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({name:e})}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},getUsers:function(){return fetch("".concat(g.REACT_APP_API_BASE,"/users"),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}},C=(n(26),function(e){Object(h.a)(r,e);var t=Object(m.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleSubmit=function(t){t.preventDefault(),e.context.clearError(),e.context.clearUserName();var n=document.getElementById("name").value;return e.context.setUserName(n),v.postUser(n).then((function(t){var n=e.props,r=n.location,a=n.history,o=(r.state||{}).from||"/adopt";a.push(o)}))},e}return Object(l.a)(r,[{key:"render",value:function(){return a.a.createElement("main",{className:"dashboard-fp"},a.a.createElement("div",null,a.a.createElement("h1",null,"Petful"),a.a.createElement("img",{className:"front",src:n(27),alt:"Adopt Me"}),a.a.createElement("h4",null,"Join the queue, get matched with a friend. Yes, it's that easy!"),a.a.createElement("h4",null,"Let's check out pets available for adoption by clicking the button below!"),a.a.createElement(c.b,{to:"/adopt"},a.a.createElement("button",{className:"adopt"},"Get Matched")," "),a.a.createElement("form",{onSubmit:this.handleSubmit},a.a.createElement("h4",null,"Or, add your name below to get added to the queue and take home a furry friend today!"),a.a.createElement("input",{"aria-label":"name",type:"text",name:"name",id:"name",placeholder:"What's Your Name?",required:!0}),a.a.createElement("br",null),a.a.createElement("button",{type:"submit"},"Get in Line"))))}}]),r}(r.Component));C.contextType=f;var A=C,y={getCat:function(){return fetch("".concat(g.REACT_APP_API_BASE,"/cats"),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},deleteCat:function(){return fetch("".concat(g.REACT_APP_API_BASE,"/cats"),{method:"DELETE",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}},b={getDog:function(){return fetch("".concat(g.REACT_APP_API_BASE,"/dogs"),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},deleteDog:function(){return fetch("".concat(g.REACT_APP_API_BASE,"/dogs"),{method:"DELETE",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}},j=(n(33),function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{className:"queue-card"},a.a.createElement("ul",null,a.a.createElement("h2",null,"User Queue"),a.a.createElement("li",null,this.props.first),a.a.createElement("li",null,this.props.second),a.a.createElement("li",null,this.props.third)))}}]),n}(r.Component)),x=(n(34),function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.animal,n=e.handleAdoptClick,r=!1;return this.context.queue&&(r=this.context.userName===this.context.queue.first.value),a.a.createElement("div",{className:"PetInfo"},a.a.createElement("img",{src:t.imageURL,alt:t.imageDescription}),a.a.createElement("h3",null,"Pet Name: ",t.name),a.a.createElement("p",null,t.story),a.a.createElement("ul",null,a.a.createElement("li",null,"Gender: ",t.gender),a.a.createElement("li",null,"Age: ",t.age),a.a.createElement("li",null,"Breed: ",t.breed),a.a.createElement("li",null,"Description: ",t.description)),a.a.createElement("button",{type:"button",onClick:n,disabled:!r},"Adopt"))}}]),n}(r.Component));x.contextType=f;n(35);var D=function(e){Object(h.a)(r,e);var t=Object(m.a)(r);function r(){return Object(i.a)(this,r),t.apply(this,arguments)}return Object(l.a)(r,[{key:"render",value:function(){var e=this.props,t=e.imgSrc,r=e.name,o=e.owner;return a.a.createElement("div",{className:"congrats"},a.a.createElement("img",{className:"yay",src:n(36),alt:"Congrats"}),a.a.createElement("img",{className:"owned",src:t,alt:"pet"}),a.a.createElement("p",null,a.a.createElement("b",null,"Pet Name: ",r)),a.a.createElement("p",null,a.a.createElement("b",null,"Owner: ",o)),a.a.createElement("p",null,a.a.createElement("b",null,"Congrats on your new pal!!")))}}]),r}(r.Component),O=function e(t){Object(i.a)(this,e),this.value=t,this.next=null},N=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(i.a)(this,e),this.first=t,this.last=n}return Object(l.a)(e,[{key:"enqueue",value:function(e){var t=new O(e);null===this.first&&(this.first=t),this.last&&(this.last.next=t),this.last=t}},{key:"dequeue",value:function(){if(null!==this.first){var e=this.first;return this.first=this.first.next,e===this.last&&(this.last=null),e.value}}},{key:"requeue",value:function(){if(null!==this.first){var e=this.dequeue();return this.enqueue(e),e}}}]),e}(),P=(n(37),function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).cycleList=function(){e.context.userName!==e.context.queue.first.value&&(Math.floor(100*Math.random())<50?e.handleAdoptCat():e.handleAdoptDog())},e.handleAdoptCat=function(){return y.deleteCat().then((function(t){var n=e.context.queue.requeue();t.owner=n,e.context.setAdopted(t)})).then((function(t){y.getCat().then((function(t){return e.context.setCurrentCat(t)})),e.setState({nowAdopting:e.context.queue.first.value})}))},e.handleAdoptDog=function(){return b.deleteDog().then((function(t){var n=e.context.queue.requeue();t.owner=n,e.context.setAdopted(t)})).then((function(t){b.getDog().then((function(t){return e.context.setCurrentDog(t)})),e.setState({nowAdopting:e.context.queue.first.value})}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.context.clearError(),this.context.clearQueue(),this.context.clearCurrentCat(),this.context.clearCurrentDog(),this.interval=setInterval(this.cycleList.bind(this),15e3),Promise.all([y.getCat(),b.getDog(),v.getUsers()]).then((function(t){e.context.setCurrentCat(t[0]),e.context.setCurrentDog(t[1]);var n=new N;t[2].forEach((function(e){return n.enqueue(e)})),e.context.setQueue(n)})).catch((function(e){return console.error(e)}))}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"renderQueue",value:function(){return a.a.createElement(j,{first:this.context.queue.first.value,second:this.context.queue.first.next.value,third:this.context.queue.first.next.next.value})}},{key:"renderCat",value:function(){return a.a.createElement(x,{animal:this.context.currentCat,animalType:"cat",handleAdoptClick:this.handleAdoptCat})}},{key:"renderDog",value:function(){return a.a.createElement(x,{animal:this.context.currentDog,animalType:"dog",handleAdoptClick:this.handleAdoptDog})}},{key:"render",value:function(){if(void 0===this.context.queue.next)return null;var e=this.context.adopted.map((function(e,t){return a.a.createElement("div",{className:"adopted",key:t},a.a.createElement(D,{imgSrc:e.imageURL,name:e.name,owner:e.owner}))}));return a.a.createElement("div",{className:"adoption-page"},a.a.createElement("h1",null,"Give Them A Home"),this.context.queue?this.renderQueue():"Loading Pets! ...",a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement("h3",null,"Current Cat"),this.renderCat()),a.a.createElement("div",null,a.a.createElement("h3",null,"Current Dog"),this.renderDog())),a.a.createElement("div",null,a.a.createElement("hr",null),a.a.createElement("h3",null,"Adopted"),e))}}]),n}(r.Component));P.contextType=f;var k=P,q=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement("main",{role:"main",className:"App-main"},a.a.createElement(E.c,null,a.a.createElement(E.a,{exact:!0,path:"/",component:A}),a.a.createElement(E.a,{path:"/adopt",component:k}))))}}]),n}(r.Component);u.a.render(a.a.createElement(c.a,null,a.a.createElement(p,null,a.a.createElement(q,null))),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.6d6e0d15.chunk.js.map